@startuml
!include_many skin.puml
!include_many actors.puml

activate operator

operator -> management ++ : get POS list

management -> mil ++ : GET /poses?page=//<page number>//&size=//<page size>//&payeeCode=//<payee code>//
	note left
		__header__
		RequestId: //<request id>//
		Authorization: Bearer //<access token>//
	end note

note over mil #LightGreen
	__//<access token>//__
	base64url(//<token header>//) + "." +
	base64url(//<access token payload>//) + "." +
	//<base64url of access token signature>//
	__//<access token payload>//__
	{
		"sub": "//<client id>//",
		"aud": "mil.pagopa.it",
		"iss": "https:////<host name>///mil-auth",
		"iat": //<issue unix epoch>//,
		"exp": //<expiration unix epoch>//,
		"groups": [
			.
			.
			.
			"PosManagement",
			.
			.
			.
		],
	}
end note

!include_many get_number_of_terminals.puml
!include_many get_terminals_data.puml

mil -> mil : //<number of pages>//> = ceil( //<number of elements>// / //<page size>// )

mil --> management -- : HTTP 200 (ok)
	note right
		__body__
		{
			"poses": [
				{
					"uuid": "//<terminal uuid>//",
					"manId": "//<client id of the subject who registered the POS>//",
					"gtId": "//<gt id>//",
					"terminalId": "//<terminal id>//",
					"enabled": //<enabled>//,
					"payeeCode": "//<payee code>//",
					"slave": "//<slave>//",
					"pagoPa": "//<pagopa>//",
					"pspId": "//<psp id>//",
					"brokerId": "//<broker id>//",
					"channelId": "//<channel id>//",
					"idpay": "//<idpay>//",
				},
                .
                .
                .
			],
			"page": {
				"size": //<page size>//,
				"totalElements": //<number of elements>//,
				"totalPages": //<number of pages>//
			}
		}
	end note

management --> operator -- : POS list

deactivate operator
@enduml